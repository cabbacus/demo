!function(t,e){"function"==typeof define&&define.amd?define(["flickity/js/index","fizzy-ui-utils/utils"],e):"object"==typeof module&&module.exports?module.exports=e(require("flickity"),require("fizzy-ui-utils")):e(t.Flickity,t.fizzyUIUtils)}(window,(function t(e,i){"use strict";function o(t,e,i){this.element=t,this.url=e,this.img=new Image,this.flickity=i,this.load()}e.createMethods.push("_createBgLazyLoad");var a=e.prototype;return a._createBgLazyLoad=function(){this.on("select",this.bgLazyLoad)},a.bgLazyLoad=function(){var t=this.options.bgLazyLoad;if(t)for(var e="number"==typeof t?t:0,i=this.getAdjacentCellElements(e),o=0;o<i.length;o++){var a=i[o];this.bgLazyLoadElem(a);for(var l=a.querySelectorAll("[data-flickity-bg-lazyload]"),n=0;n<l.length;n++)this.bgLazyLoadElem(l[n])}},a.bgLazyLoadElem=function(t){var e=t.getAttribute("data-flickity-bg-lazyload");e&&new o(t,e,this)},o.prototype.handleEvent=i.handleEvent,o.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.element.removeAttribute("data-flickity-bg-lazyload")},o.prototype.onload=function(t){this.element.style.backgroundImage='url("'+this.url+'")',this.complete(t,"flickity-bg-lazyloaded")},o.prototype.onerror=function(t){this.complete(t,"flickity-bg-lazyerror")},o.prototype.complete=function(t,e){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this),this.element.classList.add(e),this.flickity.dispatchEvent("bgLazyLoad",t,this.element)},e.BgLazyLoader=o,e}));